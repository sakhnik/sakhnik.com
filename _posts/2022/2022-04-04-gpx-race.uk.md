---
layout: post
title:  "Гонки на мапі"
ref:    2022-02-02-gpx-race
lang:   uk
date:   2022-04-04 20:45:07 +03:00
tags:   python орієнтування jupyter війна
---

Пройшло більше місяця від початку повномасштабного
[вторгнення
РФ](https://uk.wikipedia.org/wiki/%D0%A0%D0%BE%D1%81%D1%96%D0%B9%D1%81%D1%8C%D0%BA%D0%B5_%D0%B2%D1%82%D0%BE%D1%80%D0%B3%D0%BD%D0%B5%D0%BD%D0%BD%D1%8F_%D0%B2_%D0%A3%D0%BA%D1%80%D0%B0%D1%97%D0%BD%D1%83_(2022)),
і важко уявити, наскільки драматично життя змінилося за одну ніч. Важко
повірити, що до цього була розкіш займатися рекреаційним орієнтуванням
у лісах. Ось там спала на думку ідея: чому б не записувати мобільними телефонами
шлях, фотографувати мапу і співставляти їх. Таким чином можна було б
досліджувати гонку. Більше того, з’ясувалося, що клуб надає мапи в хорошій
якості і роздільній здатності, то ж навіть не потрібно фотографувати. Але мапу
все одно доведеться розташовувати по координатах GPS. Так виник проєкт
[gpx-race](https://github.com/sakhnik/gpx-race).

Зручно створювати веб-інтерфейс програми з допомогою
[JupyterLab](https://jupyter.org/), в якому є багато готових віджетів на кшталт
клавіші вивантаження файлів, мапи [leaflet](https://leafletjs.com/) тощо.

![voila gpx-race.ipynb](/assets/2022-04/voila-gpx-race.png)

Нарешті, коли чотири маркери співставлені на картинці і на мапі
[OSM](https://www.openstreetmap.org), можна розрахувати перспективну проєкцію
і правильно розмістити орієнтувальну мапу. Результат можна завантажити як
окрему сторінку HTML.

<iframe src="/assets/2022-04/2022-02-13-poultry.html" width="100%" height="480" style="border:1px solid black;">
</iframe>

Багато чого ще можна покращити в цій програмі і в функціональності, і в досвіді
користувача. Наприклад, деякі старші мапи не дуже точні, і для них може
знадобитися шматкове афінне перетворення, щоб співставити більше, ніж чотири
точки. Але, на жаль, це зараз має низький пріоритет.
