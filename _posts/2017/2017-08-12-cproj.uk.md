---
layout: post
title:  "Керування проектом C++"
ref:    2017-08-12-cproj
lang:   uk
date:   2017-08-12 22:00:33 +03:00
tags:   cpp vim
---

Я спробував [Qt Creator](https://www.qt.io/ide/) у пошуку спрощення розробки на
C++. Мені сподобалося в ньому багато речей:

* Блискучий слухняний інтерфейс з прибамбасами
* Підказка аргументів функції у редакторі коду
* Легка навігація по коду: до оголошення, знайти вживання тощо
* Вбудований налагоджувальник
* Автоматизоване керування проектами CMake

Жодних сумінів, сама ідея налаштовування проекту, збирання і налагодження «з
коробки» дуже приваблива. Проте, мені трапилися і труднощі:

* Загальні проекти все ще потрібно налаштовувати самотужки (згадайте збірку gradle)
* Підказки по коду можуть бути нестійкими, показувати помилки ледь не в кожному
рядку випадковим чином
* Все ще немає [нечіткого](https://bugreports.qt.io/browse/QTCREATORBUG-3111)
пошуку
* Каркас для тестування С++ [Catch]({% post_url /2016/2016-12-03-cpp-unit-testing %})
не дуже добре інтегровано (перейти до першої помилки?)
* Що вже й казати, що я все ще більш звик до [neovim](https://neovim.io/)

Потім прийшло розуміння, що всі принади вже й задовго до того були у Vim,
але потрібно було щоразу налаштовувати самотужки. Це нудний процес, який
відволікав від основної задачі. На щастя, його можна було б легко автоматизувати
так само, як у Qt Creator обробляються загальні проекти.
Отже, ось `cproj`, система роботи з загальними проектами C++
у моїх [dotfiles](https://github.com/sakhnik/dotfiles):

* [ycm-update.sh](https://github.com/sakhnik/dotfiles/blob/master/bin/.bin/ycm-update.sh)
компактно встановить [YouCompleteMe]({% post_url /2016/2016-11-03-ycm-deployment.uk %})
з правильними шляхами до системних директорій у `~/.vim/includes.txt`

* [cproj-init](https://github.com/sakhnik/dotfiles/blob/master/bin/.bin/cproj-init)
у кореневій директорії проекту створить шаблонну директорію `.cproj` з `files`
і `cflags` у ній

* [cproj-scan](https://github.com/sakhnik/dotfiles/blob/master/bin/.bin/cproj-scan)
у кореневій директорії проекту створить базу даних компіляції у `.cproj.out` і
додасть проект до [rtags]({% post_url /2017/2017-01-08-vim-rtags.uk %})
(зручно зробити, щоб `rdm` активувався сокетом у systemd)

* Нарешті, YCM
[завантажить](https://github.com/sakhnik/dotfiles/blob/df8f68efb3267b2c73c81ed6da9f5000ef19db0e/vim/.vim/ycm_extra_conf.py#L79)
ті самі налаштунки проекту!

Тож, імовірно, я продовжу одночасно з обома: neovim для продуктивності і Qt Creator з
цікавості і для натхнення. Але очевидно, що Vim все ще найкраще.
